
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../p8/">
      
      
        <link rel="next" href="../../versionado_datos/p10/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Buenas Prácticas de Codificación - Maestría en Ciencia Datos - Curso MLOps</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#objetivos" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Maestría en Ciencia Datos - Curso MLOps" class="md-header__button md-logo" aria-label="Maestría en Ciencia Datos - Curso MLOps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Maestría en Ciencia Datos - Curso MLOps
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Buenas Prácticas de Codificación
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Maestría en Ciencia Datos - Curso MLOps" class="md-nav__button md-logo" aria-label="Maestría en Ciencia Datos - Curso MLOps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Maestría en Ciencia Datos - Curso MLOps
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../arquitectura/flujo_proyecto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arquitectura del Proyecto
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ambiente Desarrollo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Ambiente Desarrollo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ambiente/p1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linea de Comandos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ambiente/p2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gestión de Paquetes y Entornos Virtuales
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ambiente/p3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Editor
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Entendimiento del Negocio
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Entendimiento del Negocio
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../negocio/p4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alineación Estratégica del Proyecto
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuración del Proyecto
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Configuración del Proyecto
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entorno/p5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creación del Entorno Virtual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entorno/p6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estructura del Proyecto
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Entrenamiento del Modelo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Entrenamiento del Modelo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Versionado del Código
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Empaquetado y gestión de dependencias
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Buenas Prácticas de Codificación
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Buenas Prácticas de Codificación
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivos" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 Objetivos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-de-configuraciones-con-hydra" class="md-nav__link">
    <span class="md-ellipsis">
      Gestión de configuraciones con Hydra
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gestión de configuraciones con Hydra">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#propuesta-de-mejora" class="md-nav__link">
    <span class="md-ellipsis">
      Propuesta de mejora
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Propuesta de mejora">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tarea" class="md-nav__link">
    <span class="md-ellipsis">
      🛠️ Tarea
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Versionado de Datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Versionado de Datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../versionado_datos/p10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Almacenamiento remoto con DVC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../versionado_datos/p11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control de versiones de datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../versionado_datos/p12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trabajando con Pipelines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Versionado de Modelos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Versionado de Modelos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../versionado_modelo/p13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control de Versiones del Modelo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivos" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 Objetivos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-de-configuraciones-con-hydra" class="md-nav__link">
    <span class="md-ellipsis">
      Gestión de configuraciones con Hydra
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gestión de configuraciones con Hydra">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#propuesta-de-mejora" class="md-nav__link">
    <span class="md-ellipsis">
      Propuesta de mejora
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Propuesta de mejora">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tarea" class="md-nav__link">
    <span class="md-ellipsis">
      🛠️ Tarea
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Buenas Prácticas de Codificación</h1>

<p>El desarrollo de sistemas de aprendizaje automático (ML) ha evolucionado desde simples prototipos en notebooks hacia aplicaciones robustas que requieren principios de ingeniería de software. En este contexto, MLOps surge como un enfoque que combina las mejores prácticas del desarrollo de software y la operación de modelos de ML, facilitando la reproducibilidad, escalabilidad y mantenibilidad de los sistemas de inteligencia artificial.</p>
<p>Una parte fundamental de MLOps es la <strong>implementación de buenas prácticas de codificación</strong>, que no solo permiten mejorar la calidad del código, sino también facilitar el trabajo colaborativo, la automatización de flujos de trabajo y la integración con herramientas de versionado, testing y despliegue continuo. En esta práctica se explorarán tres pilares clave para lograr un desarrollo más profesional y organizado:</p>
<ul>
<li>
<p><strong>Uso de archivos de configuración</strong> (Config Files): Separar la lógica del código de los parámetros y configuraciones del sistema facilita la experimentación, la reutilización del código y la trazabilidad de los cambios.</p>
</li>
<li>
<p><strong>Interfaces de línea de comandos</strong> (Command Line Interfaces, CLI): Incorporar interfaces CLI robustas y flexibles permite ejecutar scripts de forma controlada y programática, facilitando la integración en pipelines automatizados y la ejecución reproducible de experimentos.</p>
</li>
<li>
<p><strong>Buenas prácticas de codificación</strong>: Aplicar principios como modularidad, documentación, tipado, control de errores, pruebas unitarias y seguimiento de estilo (PEP8, linters) permite construir código más limpio, escalable y confiable, características esenciales para proyectos de ciencia de datos que evolucionan hacia producción.</p>
</li>
</ul>
<h2 id="objetivos">🎯 Objetivos</h2>
<ul>
<li>
<p>Diseñar e implementar estructuras de configuración externas (YAML, JSON, .env) para separar los parámetros de ejecución de la lógica del código, siguiendo principios de limpieza y flexibilidad.</p>
</li>
<li>
<p>Explorar distintas formas de construir interfaces de línea de comandos (CLI) para aplicaciones de ML:</p>
<ul>
<li>Uso de librerías como argparse, click o typer.</li>
<li>Construcción de comandos reutilizables y documentados.</li>
<li>Manejo de argumentos, subcomandos y ayuda contextual.</li>
</ul>
</li>
<li>
<p>Aplicar buenas prácticas de codificación en el desarrollo de componentes de un proyecto MLOps.</p>
</li>
</ul>
<h2 id="gestion-de-configuraciones-con-hydra">Gestión de configuraciones con Hydra</h2>
<p>El código actual del proyecto utiliza <code>argparse</code> para recibir ciertos parámetros necesarios para la ejecución de los scripts; sin embargo, también <strong>incorpora otros parámetros directamente codificados en el cuerpo del programa</strong>. Por ejemplo, el script <code>stage0_loading.py</code>, utiliza <code>argparse</code> para recibir la URL donde está alojado  los datos externos, pero además incluye valores codificados directamente en el código fuente, como la ruta donde se guarda el archivo descargado. Este enfoque limita la flexibilidad y dificulta su uso en distintos entornos o etapas del pipeline.</p>
<p>El uso de valores codificados ("hardcoded") como:</p>
<div class="highlight"><pre><span></span><code>self.external_data<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;data/external&quot;</span>
</code></pre></div>
<p>impide modificar rutas de entrada o salida sin alterar directamente el código, lo cual va en contra de las buenas prácticas en proyectos MLOps.</p>
<p>Por ello, se propone migrar a un enfoque basado en archivos de configuración con <a href="https://hydra.cc/">Hydra</a>, una herramienta moderna que permite manejar parámetros de manera flexible y desacoplada del código, ideal para flujos complejos de entrenamiento, pruebas y despliegue de modelos.</p>
<h3 id="propuesta-de-mejora">Propuesta de mejora</h3>
<p>Hydra permite manejar configuraciones con archivos <code>.yaml</code>, dejando el código fuente limpio y desacoplado de decisiones contextuales como rutas de archivos, nombres, etc. A continuación los pasos para migrar a Hydra:</p>
<ol>
<li>
<p>Instalar Hydra</p>
<p>Hasta la fecha actual, Hydra no está disponible directamente como paquete en los canales estándar de Conda (como <code>conda-forge</code> o <code>defaults</code>), por lo que la forma recomendada de instalar <code>hydra-core</code> es usando <code>pip</code>, incluso dentro de un entorno Conda:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>hydra-core
</code></pre></div>
</li>
<li>
<p>Crear un archivo de configuración YAML</p>
<p>Crea el archivo <code>configs/data_eng.yaml</code>, el cual contendrá todos los parámetros necesarios para la fase Ingeniería de Datos (Data Enginnering) del flujo de trabajo de MLOPS. Por el momento, el archivo tendra el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><span class="nt">data_source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/jmem-ec/KRRCourse/ccbd6ccf8389ba0988d53fc9300a64da00e6368b/Consignment_pricing.csv&quot;</span>
<span class="w">    </span><span class="nt">external_data_dir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data/external&quot;</span>
<span class="w">    </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Consignment_pricing.csv&quot;</span>
</code></pre></div>
</li>
<li>
<p>Modificar el script para usar Hydra</p>
<p>Las siguientes acciones han sido ejecutadas:</p>
<ul>
<li>
<p>Incorporar en la seccion de importación 
    <div class="highlight"><pre><span></span><code>    <span class="kn">import</span><span class="w"> </span><span class="nn">hydra</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">omegaconf</span><span class="w"> </span><span class="kn">import</span> <span class="n">DictConfig</span>
</code></pre></div></p>
</li>
<li>
<p>Reemplaza el uso de <code>argparse</code> por hydra, y usa los valores del archivo <code>.yaml</code></p>
<p><div class="highlight"><pre><span></span><code><span class="nd">@hydra</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="s2">&quot;../../configs&quot;</span><span class="p">,</span> <span class="n">config_name</span><span class="o">=</span><span class="s2">&quot;data_eng&quot;</span><span class="p">,</span> <span class="n">version_base</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">cfg</span><span class="p">:</span> <span class="n">DictConfig</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">GetData</span><span class="p">()</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>

<span class="k">if</span> <span class="n">_name_</span> <span class="o">==</span> <span class="s2">&quot;_main_&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
Toma en cuenta que <strong>no puedes llamar directamente</strong> a la función decorada con <code>@hydra.main(...)</code> como <code>main()</code> desde <code>if __name__ == "__main__":</code>, porque Hydra necesita controlar el punto de entrada del script para realizar su redirección de rutas y configuración del entorno de ejecución.</p>
</li>
<li>
<p>Modifica la cabecera de la funcion <code>get_data</code> </p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</code></pre></div>
</li>
<li>
<p>Cambia los valores codificados ("hardcoded") usando los valores del archivo <code>.yaml</code>
    <div class="highlight"><pre><span></span><code><span class="o">...</span>
<span class="n">github_csv_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">data_source</span><span class="o">.</span><span class="n">url</span>

<span class="bp">self</span><span class="o">.</span><span class="n">external_data</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">data_source</span><span class="o">.</span><span class="n">external_data_dir</span>

<span class="o">...</span>
<span class="n">local_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">external_data</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">data_source</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</code></pre></div></p>
</li>
</ul>
</li>
</ol>
<h4 id="tarea">🛠️ Tarea</h4>
<ul>
<li>
<p>Por defecto, Hydra escribirá los resultados en una carpeta de resultados, con una subcarpeta para el día en que se ejecutó el experimento y, además, la hora en que se inició. Inspeccione su ejecución revisando cada archivo que Hydra ha generado y compruebe que la información ha sido registrada.</p>
</li>
<li>
<p>Hydra también permite cambiar y añadir parámetros dinámicamente sobre la marcha desde la línea de comandos:</p>
<ul>
<li>
<p>Pruebe a cambiar un parámetro desde la línea de comandos.
<div class="highlight"><pre><span></span><code><span class="n">python</span> <span class="n">src</span><span class="o">/</span><span class="n">data_eng</span><span class="o">/</span><span class="n">stage0_loading</span><span class="o">.</span><span class="n">py</span> <span class="n">data_source</span><span class="o">.</span><span class="n">filename</span><span class="o">=</span><span class="n">Dataset1</span><span class="o">.</span><span class="n">csv</span>
</code></pre></div></p>
</li>
<li>
<p>Pruebe a añadir un parámetro desde la línea de comandos.
<div class="highlight"><pre><span></span><code><span class="n">python</span> <span class="n">src</span><span class="o">/</span><span class="n">data_eng</span><span class="o">/</span><span class="n">stage0_loading</span><span class="o">.</span><span class="n">py</span> <span class="o">+</span><span class="n">data_source</span><span class="o">.</span><span class="n">additional</span><span class="o">=</span><span class="mi">50</span>
</code></pre></div></p>
</li>
</ul>
</li>
<li>
<p>Realice un nuevo experimento utilizando un nuevo archivo de configuración en el que cambie un parámetro de su elección. No se le permite cambiar el archivo de configuración en el script, sino que debería poder proporcionarlo como argumento al iniciar el script, por ejemplo, algo como</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>src/data_eng/stage0_loading.py<span class="w"> </span><span class="nv">experiment</span><span class="o">=</span>exp2
</code></pre></div>
<p>Le recomendamos que utilice una estructura de archivos como la siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="p">|</span>--confs
<span class="p">|</span><span class="w">  </span><span class="p">|</span>--model1.yaml
<span class="p">|</span><span class="w">  </span><span class="p">|</span>--data_eng.yaml
<span class="p">|</span><span class="w">  </span><span class="p">|</span>--experiments
<span class="p">|</span><span class="w">     </span><span class="p">|</span>--exp1.yaml
<span class="p">|</span><span class="w">     </span><span class="p">|</span>--exp2.yaml
<span class="p">|</span>--data
<span class="p">|</span>--...
</code></pre></div>
<p>Este sería el archivo base de configuración <code>data_eng.yaml</code>, que incluye un grupo <code>experiment</code>:</p>
<div class="highlight"><pre><span></span><code>defaults:
<span class="w">    </span>-<span class="w"> </span>experiment:<span class="w"> </span>exp1<span class="w">   </span><span class="c1"># valor por defecto</span>

data_source:
<span class="w">    </span>url:<span class="w"> </span><span class="s2">&quot;https://raw.githubusercontent.com/jmem-ec/KRRCourse/ccbd6ccf8389ba0988d53fc9300a64da00e6368b/Consignment_pricing.csv&quot;</span>
<span class="w">    </span>external_data_dir:<span class="w"> </span><span class="s2">&quot;data/external&quot;</span>
<span class="w">    </span>filename:<span class="w"> </span><span class="s2">&quot;Consignment_pricing.csv&quot;</span>
</code></pre></div>
<p>Experimento 1: configs/experiments/exp1.yaml</p>
<div class="highlight"><pre><span></span><code>data_source:
<span class="w">    </span>filename:<span class="w"> </span><span class="s2">&quot;Dataset1.csv&quot;</span>
</code></pre></div>
<p>Experimento 2: configs/experiments/exp2.yaml</p>
<div class="highlight"><pre><span></span><code>data_source:
<span class="w">    </span>filename:<span class="w"> </span><span class="s2">&quot;Dataset2.csv&quot;</span>
</code></pre></div>
<p>Ahora puede probar los experimentos</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Ejecuta con la configuración por defecto (exp1)</span>
python<span class="w"> </span>src/data_eng/stage0_loading.py

<span class="c1"># Ejecuta con la configuración de experimento 2</span>
python<span class="w"> </span>src/data_eng/stage0_loading.py<span class="w"> </span><span class="nv">experiment</span><span class="o">=</span>exp2
</code></pre></div>
</li>
<li>
<p>Modifique el script <code>stage1_ingestion.py</code> para que obtenga los parámetros necesarios desde el archivo de configuración <code>data_eng.yaml</code>, en lugar de tenerlos codificados directamente en el script.
En particular, asegúrate de que el archivo <code>data_eng.yaml</code> incluya la siguiente sección:</p>
<div class="highlight"><pre><span></span><code>raw_data:
<span class="w">    </span>raw_data_dir:<span class="w"> </span><span class="s2">&quot;data/raw&quot;</span>
<span class="w">    </span>raw_filename:<span class="w"> </span><span class="s2">&quot;Dataset.csv&quot;</span>
</code></pre></div>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>