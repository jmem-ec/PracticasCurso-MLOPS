
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../p11/">
      
      
        <link rel="next" href="../../versionado_modelo/p13/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Trabajando con Pipelines - Maestr√≠a en Ciencia Datos - Curso MLOps</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#objetivos" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Maestr√≠a en Ciencia Datos - Curso MLOps" class="md-header__button md-logo" aria-label="Maestr√≠a en Ciencia Datos - Curso MLOps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Maestr√≠a en Ciencia Datos - Curso MLOps
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Trabajando con Pipelines
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B√∫squeda" placeholder="B√∫squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b√∫squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegaci√≥n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Maestr√≠a en Ciencia Datos - Curso MLOps" class="md-nav__button md-logo" aria-label="Maestr√≠a en Ciencia Datos - Curso MLOps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Maestr√≠a en Ciencia Datos - Curso MLOps
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../arquitectura/flujo_proyecto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arquitectura del Proyecto
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ambiente Desarrollo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Ambiente Desarrollo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ambiente/p1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linea de Comandos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ambiente/p2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gesti√≥n de Paquetes y Entornos Virtuales
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ambiente/p3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Editor
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Entendimiento del Negocio
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Entendimiento del Negocio
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../negocio/p4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alineaci√≥n Estrat√©gica del Proyecto
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuraci√≥n del Proyecto
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Configuraci√≥n del Proyecto
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entorno/p5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creaci√≥n del Entorno Virtual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entorno/p6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estructura del Proyecto
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Entrenamiento del Modelo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Entrenamiento del Modelo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entrenamiento/p7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Versionado del C√≥digo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entrenamiento/p8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Empaquetado y gesti√≥n de dependencias
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entrenamiento/p9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Buenas Pr√°cticas de Codificaci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Versionado de Datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Versionado de Datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Almacenamiento remoto con DVC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control de versiones de datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Trabajando con Pipelines
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Trabajando con Pipelines
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivos" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ Objetivos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requisitos" class="md-nav__link">
    <span class="md-ellipsis">
      üõ†Ô∏è Requisitos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      Creaci√≥n de pipelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generar-metricas" class="md-nav__link">
    <span class="md-ellipsis">
      Generar m√©tricas
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Versionado de Modelos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Versionado de Modelos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../versionado_modelo/p13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control de Versiones del Modelo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivos" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ Objetivos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requisitos" class="md-nav__link">
    <span class="md-ellipsis">
      üõ†Ô∏è Requisitos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      Creaci√≥n de pipelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generar-metricas" class="md-nav__link">
    <span class="md-ellipsis">
      Generar m√©tricas
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Trabajando con Pipelines</h1>

<p>Despu√©s de aprender a versionar datos y modelos con DVC, el siguiente paso es automatizar y estructurar nuestros flujos de trabajo mediante la construcci√≥n de un pipeline de experimentos. Un pipeline permite encadenar etapas del proceso (por ejemplo, preprocesamiento, entrenamiento y evaluaci√≥n) de forma reproducible y trazable, facilitando el trabajo colaborativo y la experimentaci√≥n sistem√°tica.</p>
<p>Esta pr√°ctica est√° basada en el dataset previamente versionado con DVC. El dataset de la secci√≥n anterior es la fuente de datos para entrenar un modelo de predicci√≥n. Consideremos que nuestro experimento tiene tres etapas principales:</p>
<ul>
<li>Preprocesamiento de datos (extracci√≥n de caracter√≠sticas, limpieza, etc.)</li>
<li>Entrenamiento del modelo</li>
<li>Evaluaci√≥n del modelo</li>
</ul>
<h2 id="objetivos">üéØ Objetivos</h2>
<ul>
<li>Construir un pipeline de ML utilizando DVC.</li>
<li>Declarar las dependencias y salidas de cada etapa del flujo de trabajo.</li>
<li>Ejecutar y rastrear autom√°ticamente los cambios en los datos o en el c√≥digo que afecten el resultado del experimento.</li>
<li>Comprender c√≥mo DVC administra los archivos intermedios y el modelo final en cada etapa.</li>
</ul>
<h2 id="requisitos">üõ†Ô∏è Requisitos</h2>
<p>Debes contar con los siguientes scripts organizados en tu proyecto:</p>
<ul>
<li><strong>preprocess.py</strong>: realiza limpieza y extracci√≥n de caracter√≠sticas.</li>
<li><strong>train.py</strong>: entrena un modelo de clasificaci√≥n.</li>
<li><strong>evaluate.py</strong>: eval√∫a el desempe√±o del modelo entrenado.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Advertencia:</p>
<p>Los pipelines propuestos a continuaci√≥n est√°n basados en la estrucutura del repositorio (creado en la pr√°ctica <a href="../../entorno/p5/">Estructura del Proyecto</a>. Sin embargo, es posible crear otros scripts y crear pipelines espec√≠ficos para las necesidades de su proyecto.</p>
</div>
<h2 id="creacion-de-pipelines">Creaci√≥n de pipelines</h2>
<p>DVC construye un pipeline basado en tres componentes: Entradas (Inputs), Salidas (Outputs) y Comando (Command). Por ejemplo, para la etapa de preprocesamiento, estos ser√≠an los componentes:</p>
<ul>
<li><strong>Entradas</strong>: archivo <code>dataset.csv</code> y el script <code>preprocess.py</code></li>
<li><strong>Salidas</strong>: archivo <code>dataset_processed.csv</code></li>
<li><strong>Comando</strong>: <code>python preprocess.py dataset.csv</code></li>
</ul>
<p>Para crear esta etapa de preprocesamiento, utilizamos el comando <code>dvc run</code> de la siguiente forma:</p>
<div class="highlight"><pre><span></span><code>dvc<span class="w"> </span>run<span class="w"> </span>-n<span class="w"> </span>preprocess<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span>./src/preprocess_data.py<span class="w"> </span>-d<span class="w"> </span>data/dataset.csv<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span>./data/dataset_processed.csv<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>python3<span class="w"> </span>./src/preprocess_data.py<span class="w"> </span>./data/dataset.csv
</code></pre></div>
<p>Aqu√≠ nombramos esta etapa como "preprocess" usando la opci√≥n <code>-n</code>. Tambi√©n definimos las entradas con la opci√≥n <code>-d</code> y las salidas con la opci√≥n <code>-o</code>. El comando que se ejecuta siempre va al final del comando <code>dvc run</code>, sin ninguna opci√≥n.</p>
<div class="admonition warning">
<p class="admonition-title">Consejo</p>
<p>Los archivos de salida se agregan al control de DVC cuando reproduces una etapa de DVC. Cuando finalices tu experimento, recuerda usar dvc push para versionar no solo los datos usados sino tambi√©n los resultados generados durante el experimento.</p>
</div>
<p>La etapa de entrenamiento se crea de manera similar con:</p>
<div class="highlight"><pre><span></span><code>dvc<span class="w"> </span>run<span class="w"> </span>-n<span class="w"> </span>train<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span>./src/train.py<span class="w"> </span>-d<span class="w"> </span>./data/dataset_processed.csv<span class="w"> </span>-d<span class="w"> </span>./src/model.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span>./models/model.joblib<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>python3<span class="w"> </span>./src/train.py<span class="w"> </span>./data/dataset_processed.csv<span class="w"> </span>./src/model.py
</code></pre></div>
<p>En este punto, es posible que hayas notado que se crearon dos archivos nuevos: <code>dvc.yaml</code> y <code>dvc.lock</code>.
El primero es responsable de guardar lo que se describi√≥ en cada comando <code>dvc run</code>. Por lo tanto, si deseas crear o modificar una etapa espec√≠fica, es posible editar directamente el archivo <code>dvc.yaml</code>. El archivo actual se ver√≠a as√≠:</p>
<div class="highlight"><pre><span></span><code>stages:
<span class="w">  </span>preprocess:
<span class="w">    </span>cmd:<span class="w"> </span>python3<span class="w"> </span>./src/preprocess_data.py<span class="w"> </span>./data/dataset.csv
<span class="w">    </span>deps:
<span class="w">    </span>-<span class="w"> </span>./src/preprocess_data.py
<span class="w">    </span>-<span class="w"> </span>data/dataset.csv
<span class="w">    </span>outs:
<span class="w">    </span>-<span class="w"> </span>./data/dataset_processed.csv
<span class="w">    </span>-<span class="w"> </span>./data/features.csv
<span class="w">  </span>train:
<span class="w">    </span>cmd:<span class="w"> </span>python3<span class="w"> </span>./src/train.py<span class="w"> </span>./data/dataset_processed.csv<span class="w"> </span>./src/model.py<span class="w"> </span><span class="m">200</span>
<span class="w">    </span>deps:
<span class="w">    </span>-<span class="w"> </span>./data/dataset_processed.csv
<span class="w">    </span>-<span class="w"> </span>./src/model.py
<span class="w">    </span>-<span class="w"> </span>./src/train.py
<span class="w">    </span>outs:
<span class="w">    </span>-<span class="w"> </span>./models/model.joblib
</code></pre></div>
<p>El segundo archivo creado es <code>dvc.lock</code>. Este tambi√©n es un archivo YAML y su funci√≥n es similar a los archivos <code>.dvc</code>. En su interior, podemos encontrar la ruta y un c√≥digo hash para cada archivo de cada etapa, lo que permite a DVC hacer seguimiento de los cambios. Este seguimiento es importante porque ahora DVC puede saber cu√°ndo una etapa debe ejecutarse de nuevo o no, bas√°ndose en si sus dependencias cambiaron.
El pipeline actual se ve as√≠:</p>
<p><img alt="Pipeline_1" src="../recursos/imagen1.gif" /></p>
<h2 id="generar-metricas">Generar m√©tricas</h2>
<p>Finalmente, vamos a crear nuestra √∫ltima etapa para poder evaluar nuestro modelo:</p>
<div class="highlight"><pre><span></span><code>dvc<span class="w"> </span>run<span class="w"> </span>-n<span class="w"> </span>evaluate<span class="w"> </span>-d<span class="w"> </span>./src/evaluate.py<span class="w"> </span>-d<span class="w"> </span>./data/weatherAUS_processed.csv<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span>./src/model.py<span class="w"> </span>-d<span class="w"> </span>./models/model.joblib<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-M<span class="w"> </span>./results/metrics.json<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span>./results/precision_recall_curve.png<span class="w"> </span>-o<span class="w"> </span>./results/roc_curve.png<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>python3<span class="w"> </span>./src/evaluate.py<span class="w"> </span>./data/weatherAUS_processed.csv<span class="w"> </span>./src/model.py<span class="w"> </span>./models/model.joblib
</code></pre></div>
<p>Es importante notar que en esta etapa usamos la opci√≥n <code>-M</code> en lugar de la opci√≥n <code>-o</code>. Esto es relevante porque ahora podemos almacenar las m√©tricas generadas por cada experimento.
Si ejecutamos el comando:</p>
<div class="highlight"><pre><span></span><code>dvc<span class="w"> </span>metrics<span class="w"> </span>show
</code></pre></div>
<p>podremos ver qu√© tan bueno fue el experimento, ya que este comando muestra las m√©tricas guardadas en el archivo <code>metrics.json</code>.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>dvc<span class="w"> </span>metrics<span class="w"> </span>show
Path<span class="w">                  </span>accuracy<span class="w">    </span>f1<span class="w">       </span>precision<span class="w">    </span>recall<span class="w">        </span>
results/metrics.json<span class="w">  </span><span class="m">0</span>.84973<span class="w">     </span><span class="m">0</span>.90747<span class="w">  </span><span class="m">0</span>.8719<span class="w">       </span><span class="m">0</span>.94607
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>